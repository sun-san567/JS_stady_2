<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Document</title>
  </head>
  <body>
    <!-- ã‚¹ãƒ­ãƒƒãƒˆãƒã‚·ãƒ³ã®è¦‹ãŸç›®ã‚’ä½œã‚Šã¾ã™ -->
    <div class="slot-machine">
      <!-- ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ -->
      <button id="start">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>

      <!-- æ•°å­—ã‚’è¡¨ç¤ºã™ã‚‹å ´æ‰€ -->
      <div class="reels">
        <!-- 1ã¤ç›®ã®æ•°å­—ã¨ã‚¹ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³ -->
        <div class="reel-box">
          <div id="reel1">0</div>
          <button id="stop1">ã‚¹ãƒˆãƒƒãƒ—</button>
        </div>

        <!-- 2ã¤ç›®ã®æ•°å­—ã¨ã‚¹ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³ -->
        <div class="reel-box">
          <div id="reel2">0</div>
          <button id="stop2">ã‚¹ãƒˆãƒƒãƒ—</button>
        </div>

        <!-- 3ã¤ç›®ã®æ•°å­—ã¨ã‚¹ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³ -->
        <div class="reel-box">
          <div id="reel3">0</div>
          <button id="stop3">ã‚¹ãƒˆãƒƒãƒ—</button>
        </div>
      </div>
      <script>
        // è¦ç´ ã®å–å¾—
        const startBtn = document.getElementById("start");
        const reel1 = document.getElementById("reel1");
        const reel2 = document.getElementById("reel2");
        const reel3 = document.getElementById("reel3");
        const stop1 = document.getElementById("stop1");
        const stop2 = document.getElementById("stop2");
        const stop3 = document.getElementById("stop3");

        // å¤‰æ•°ã®åˆæœŸåŒ–
        let isSpinning = false;
        let spin1 = null;
        let spin2 = null;
        let spin3 = null;

        // åˆæœŸçŠ¶æ…‹ã§ã‚¹ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
        stop1.disabled = true;
        stop2.disabled = true;
        stop3.disabled = true;

        // ãƒ©ãƒ³ãƒ€ãƒ ãªæ•°å­—ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°
        function getRandomNumber() {
          return Math.floor(Math.random() * 17) + 1;
        }

        // ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
        startBtn.addEventListener("click", function () {
          // ã™ã§ã«å›è»¢ä¸­ãªã‚‰ä½•ã‚‚ã—ãªã„
          if (isSpinning) return;

          // å›è»¢é–‹å§‹
          isSpinning = true;

          // ã‚¹ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
          stop1.disabled = false;
          stop2.disabled = false;
          stop3.disabled = false;

          // å„ãƒªãƒ¼ãƒ«ã®å›è»¢é–‹å§‹
          spin1 = setInterval(function () {
            reel1.textContent = getRandomNumber();
          }, 100);

          spin2 = setInterval(function () {
            reel2.textContent = getRandomNumber();
          }, 100);

          spin3 = setInterval(function () {
            reel3.textContent = getRandomNumber();
          }, 100);
        });

        // ã‚¹ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³1ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
        stop1.addEventListener("click", function () {
          if (!isSpinning) return;
          // å›è»¢å‡¦ç†ã‚’ã‚¹ãƒˆãƒƒãƒ—
          clearInterval(spin1);
          // ã‚¹ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³ã‚’æŠ¼ã›ãªã„ã‚ˆã†ã«
          stop1.disabled = true;
          // æ•°å­—ã®çµ±ä¸€ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹é–¢æ•°
          checkResult();
        });

        // ã‚¹ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³2ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
        stop2.addEventListener("click", function () {
          if (!isSpinning) return;
          clearInterval(spin2);
          stop2.disabled = true;
          checkResult();
        });

        // ã‚¹ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³3ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
        stop3.addEventListener("click", function () {
          if (!isSpinning) return;
          clearInterval(spin3);
          stop3.disabled = true;
          checkResult();
        });

        // çµæœã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹é–¢æ•°
        function checkResult() {
          // å…¨ã¦ã®ãƒªãƒ¼ãƒ«ãŒæ­¢ã¾ã£ã¦ã„ã‚‹ã‹ç¢ºèª
          if (stop1.disabled && stop2.disabled && stop3.disabled) {
            // å›è»¢çŠ¶æ…‹ã‚’è§£é™¤ã€€å¿µã®ç‚ºã€å‹•ä½œã‚’æ­¢ã‚ã‚‹
            isSpinning = false;

            // æ•°å­—ãŒæƒã£ã¦ã„ã‚‹ã‹ç¢ºèª
            if (
              reel1.textContent === reel2.textContent &&
              reel2.textContent === reel3.textContent
            ) {
              // æƒã£ãŸå ´åˆ
              setTimeout(function () {
                alert("ğŸ‰ å¤§å½“ãŸã‚Šï¼3ã¤æƒã„ã¾ã—ãŸï¼");
              }, 1000);
            } else {
              // æƒã‚ãªã‹ã£ãŸå ´åˆ
              setTimeout(function () {
                alert("ğŸ˜¢ æ®‹å¿µï¼ã‚‚ã†ä¸€åº¦ãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼");
              }, 1000);
            }
          }
        }

        // console.log(isSpinning)
        console.log(getRandomNumber());
      </script>
    </div>
  </body>
</html>
